<div class="chat-welcome-section" *ngIf="chatStore.selectedChat() == null" >
    <div class="row w-100 justify-content-center">
        <div class="col-xxl-5 col-md-7">
            <div class="p-4 text-center">
                <div class="avatar-xl mx-auto mb-4">
                    <div class="avatar-title bg-secondary rounded-circle">
                        <svg data-v-5e8ea5c2="" xmlns="http://www.w3.org/2000/svg" width="70px" height="65px"
                             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-square">
                            <path data-v-5e8ea5c2=""
                                  d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z">
                            </path>
                        </svg>
                    </div>
                </div>
                <h4 class="d-inline px-3 py-2 rounded-pill bg-secondary text-white fs-4">{{ 'chat.placeHolder.startConversation' | translate }}</h4>
            </div>
        </div>
    </div>
</div>

<!-- Start User chat -->
<div class="user-chat w-100 overflow-hidden user-chat-show" id="chat-room" *ngIf="chatStore.selectedChat() != null">
    <div class="d-lg-flex">
        <!-- start chat conversation section -->
        <div class="w-100 overflow-hidden position-relative">
            <div class="p-3 p-lg-4 border-bottom user-chat-topbar">
                <div class="row align-items-center">
                    <div class="col-sm-4 col-8">
                        <div class="d-flex align-items-center">
                            <div class="d-block d-lg-none me-2 ms-0">
                                <a href="javascript: void(0);" class="user-chat-remove text-muted font-size-16 p-2"
                                   (click)="closeUserChat()"><i class="ri-arrow-left-s-line"></i></a>
                            </div>
                            <div class="me-3 ms-0">
                                @if (userProfile) {
                                    <img src="{{userProfile}}" class="rounded-circle avatar-xs" alt="">
                                } @else {
                                    <div class="avatar-xs">
                    <span class="avatar-title rounded-circle bg-primary-subtle text-primary">
                      {{ chatStore.selectedChat().chatName.charAt(0) }}
                    </span>
                                    </div>
                                }
                            </div>
                            <div class="flex-grow-1 overflow-hidden">
                                <h5 class="font-size-16 mb-0 text-truncate">
                                    <a href="javascript:void(0);" class="text-reset user-profile-show username"
                                       (click)="onChatInfoClicked()">{{ chatStore.selectedChat().chatName }}</a>
                                    <i class="ri-record-circle-fill font-size-10 d-inline-block ms-1"
                                       [ngClass]=" {'text-success': userStatus === 'online','text-warning': userStatus === 'away'}"></i>
                                </h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8 col-4">
                        <ul class="list-inline user-chat-nav text-end mb-0">
                            <li class="list-inline-item">
                                <div class="dropdown" ngbDropdown>
                                    <button class="btn nav-btn dropdown-toggle" ngbDropdownToggle type="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="ri-search-line"></i>
                                    </button>
                                    <div class="dropdown-menu p-0 dropdown-menu-end dropdown-menu-md"
                                         ngbDropdownMenu>
                                        <div class="search-box p-2">
                                            <input type="text" class="form-control bg-light border-0"
                                                   placeholder="{{'chat.chatpanelheader.search.placeholder' | translate}}"
                                                   (keyup)="MessageSearch()" id="searchMessage">
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="list-inline-item d-none d-lg-inline-block me-2 ms-0">
                                <button type="button" class="btn nav-btn" data-bs-toggle="modal"
                                        data-bs-target="#audiocallModal" (click)="openCallModal(callContent)">
                                    <i class="ri-phone-line"></i>
                                </button>
                            </li>
                            <ng-template #callContent let-modal>
                                <div class="modal-body">
                                    <div class="text-center p-4">
                                        <div class="avatar-lg mx-auto mb-4">
                                            <img src="{{userProfile}}" alt="" class="img-thumbnail rounded-circle">
                                        </div>
                                        <h5 class="text-truncate">{{ (userName | translate) }}</h5>
                                        <p class="text-muted">Start Audio Call</p>
                                        <div class="mt-5">
                                            <ul class="list-inline mb-1">
                                                <li class="list-inline-item px-2 me-2 ms-0">
                                                    <button type="button"
                                                            class="btn btn-danger avatar-sm rounded-circle"
                                                            data-bs-dismiss="modal"
                                                            (click)="modal.close('Close click')">
                              <span class="avatar-title bg-transparent font-size-20">
                                <i class="ri-close-fill"></i>
                              </span>
                                                    </button>
                                                </li>
                                                <li class="list-inline-item px-2">
                                                    <button type="button"
                                                            class="btn btn-success avatar-sm rounded-circle">
                              <span class="avatar-title bg-transparent font-size-20">
                                <i class="ri-phone-fill"></i>
                              </span>
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                            <li class="list-inline-item d-none d-lg-inline-block me-2 ms-0">
                                <button type="button" class="btn nav-btn" data-bs-toggle="modal"
                                        data-bs-target="#videocallModal" (click)="openVideoModal(videoContent)">
                                    <i class="ri-vidicon-line"></i>
                                </button>
                            </li>
                            <ng-template #videoContent let-modal>
                                <div class="modal-body">
                                    <div class="text-center p-4">
                                        <div class="avatar-lg mx-auto mb-4">
                                            <img src="{{userProfile}}" alt="" class="img-thumbnail rounded-circle">
                                        </div>
                                        <h5 class="text-truncate">{{ (userName | translate) }}</h5>
                                        <p class="text-muted mb-0">Start Video Call</p>
                                        <div class="mt-5">
                                            <ul class="list-inline mb-1">
                                                <li class="list-inline-item px-2 me-2 ms-0">
                                                    <button type="button"
                                                            class="btn btn-danger avatar-sm rounded-circle"
                                                            data-bs-dismiss="modal"
                                                            (click)="modal.close('Close click')">
                              <span class="avatar-title bg-transparent font-size-20">
                                <i class="ri-close-fill"></i>
                              </span>
                                                    </button>
                                                </li>
                                                <li class="list-inline-item px-2">
                                                    <button type="button"
                                                            class="btn btn-success avatar-sm rounded-circle">
                              <span class="avatar-title bg-transparent font-size-20">
                                <i class="ri-vidicon-fill"></i>
                              </span>
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                            <li class="list-inline-item d-none d-lg-inline-block me-2 ms-0">
                                <button type="button" class="btn nav-btn user-profile-show"
                                        (click)="onChatInfoClicked()">
                                    <i class="ri-user-2-line"></i>
                                </button>
                            </li>
                            <li class="list-inline-item">
                                <div class="dropdown" ngbDropdown>
                                    <button class="btn nav-btn dropdown-toggle" ngbDropdownToggle type="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="ri-more-fill"></i>
                                    </button>
                                    <div class="dropdown-menu dropdown-menu-right" ngbDropdownMenu>
                                        <a class="dropdown-item d-block d-lg-none user-profile-show"
                                           (click)="showUserProfile()"
                                           href="javascript: void(0);">{{ 'chat.chatpanelheader.dropdown.viewprofile' | translate }}
                                            <i class="ri-user-2-line float-end text-muted"></i></a>
                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                'chat.chatpanelheader.dropdown.archive' |
                                                    translate
                                            }} <i class="ri-archive-line float-end text-muted"></i></a>
                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                'chat.chatpanelheader.dropdown.muted' |
                                                    translate
                                            }} <i class="ri-volume-mute-line float-end text-muted"></i></a>
                                        <a class="dropdown-item" href="javascript:void(0);"
                                           (click)="deleteAllMessage($event)">{{ 'chat.chatpanelheader.dropdown.delete' | translate }}
                                            <i class="ri-delete-bin-line float-end text-muted"></i></a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- end chat user head -->
            <!-- <div id="users-chat" class="position-relative"> -->
            <!-- start chat conversation -->
            <ngx-simplebar class="chat-conversation p-3 p-lg-4" #scrollRef style="scroll-behavior: smooth">
                <ul class="list-unstyled mb-0" id="users-conversation">
                    @for (msg of chatStore.selectedChat()?.messages; track $index) {
                        <li class="chats" [ngClass]="{'right': msg.isSelf}">
                            @if (false) {
                                <div class="chat-day-title">
                                    <span class="title">Today</span>
                                </div>
                            } @else {
                                <div class="conversation-list">
                                    @if (msg.isSelf) {
                                        <div class="avatar-xs">
                                            <span class="avatar-title rounded-circle bg-primary-subtle text-primary">
                                              {{ auth.user()?.userName.charAt(0) || 'X' }}
                                            </span>
                                        </div>
                                    } @else {
                                        <div class="chat-avatar">
                                            @if (false) {
                                                <img src="{{userProfile}}" alt="">
                                            } @else {
                                                <div class="avatar-xs">
                                                    <span class="avatar-title rounded-circle bg-primary-subtle text-primary">
                                                      {{ msg.fromUser.charAt(0) }}
                                                    </span>
                                                </div>
                                            }
                                        </div>
                                    }



                                    <div class="user-chat-content">
                                        <div class="ctext-wrap">
                                            <div class="ctext-wrap-content">
                                                <!--                                                @if (data.replayName) {-->
                                                <!--                                                    <div class="replymessage-block mb-0 d-flex align-items-start">-->
                                                <!--                                                        <div class="flex-grow-1">-->
                                                <!--                                                            <h5 class="conversation-name">{{ data.replayName }}</h5>-->
                                                <!--                                                            <p class="mb-0">{{ data.replaymsg | translate }}</p>-->
                                                <!--                                                        </div>-->
                                                <!--                                                        <div class="flex-shrink-0">-->
                                                <!--                                                            <button type="button"-->
                                                <!--                                                                    class="btn btn-sm btn-link mt-n2 me-n3 font-size-18">-->
                                                <!--                                                            </button>-->
                                                <!--                                                        </div>-->
                                                <!--                                                    </div>-->
                                                <!--                                                }-->
                                                <p class="mb-0 messageText">
                                                    {{ msg.textMessage }}
                                                </p>

                                                @if (msg.image) {
                                                    <ul class="list-inline message-img mb-0">
                                                        @for (imageSrc of [msg.image]; track imageSrc; let x = $index) {
                                                            <li class="list-inline-item message-img-list">
                                                                <div>
                                                                    <a class="popup-img d-inline-block m-1 p-0"
                                                                       href="javascript:void(0);" title="Project 1">
                                                                        <img :src="{{imageSrc}}" alt=""
                                                                             class="rounded border"
                                                                             (click)="openImage(imageSrc, 0)">
                                                                    </a>
                                                                </div>
                                                                <div class="message-img-link">
                                                                    <ul class="list-inline mb-0">
                                                                        <li class="list-inline-item">
                                                                            <a href="javascript:void(0);">
                                                                                <i class="ri-download-2-line"></i>
                                                                            </a>
                                                                        </li>
                                                                        <li class="list-inline-item dropdown"
                                                                            ngbDropdown>
                                                                            <a class="dropdown-toggle"
                                                                               href="javascript:void(0);"
                                                                               role="button" ngbDropdownToggle
                                                                               data-toggle="dropdown"
                                                                               aria-haspopup="true"
                                                                               aria-expanded="false">
                                                                                <i class="ri-more-fill"></i>
                                                                            </a>
                                                                            <div class="dropdown-menu"
                                                                                 ngbDropdownMenu>
                                                                                <a class="dropdown-item"
                                                                                   href="javascript:void(0);">{{
                                                                                        'chat.messages.dropdown.copy'
                                                                                            | translate
                                                                                    }} <i
                                                                                            class="ri-file-copy-line float-end text-muted"></i></a>
                                                                                <a class="dropdown-item"
                                                                                   href="javascript:void(0);">{{
                                                                                        'chat.messages.dropdown.save'
                                                                                            | translate
                                                                                    }} <i
                                                                                            class="ri-save-line float-end text-muted"></i></a>
                                                                                <a class="dropdown-item"
                                                                                   href="javascript:void(0);">{{ 'chat.messages.dropdown.forward' | translate }}
                                                                                    <i class="ri-chat-forward-line float-end text-muted"></i></a>
                                                                                <a class="dropdown-item"
                                                                                   href="javascript:void(0);"
                                                                                   (click)="deleteMessage($event)">{{ 'chat.messages.dropdown.delete' | translate }}
                                                                                    <i class="ri-delete-bin-line float-end text-muted"></i></a>
                                                                            </div>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                        }
                                                    </ul>
                                                }
                                                <!--                                                @if (data.isfile) {-->
                                                <!--                                                    <div class="card p-2 mb-2">-->
                                                <!--                                                        <div class="d-flex align-items-center">-->
                                                <!--                                                            <div class="avatar-sm me-3 ms-0">-->
                                                <!--                                                                <div-->
                                                <!--                                                                        class="avatar-title bg-primary-subtle text-primary rounded font-size-20">-->
                                                <!--                                                                    <i class="ri-file-text-fill"></i>-->
                                                <!--                                                                </div>-->
                                                <!--                                                            </div>-->
                                                <!--                                                            <div class="d-flex-body">-->
                                                <!--                                                                <div class="text-start">-->
                                                <!--                                                                    <h5 class="font-size-14 mb-1">{{ data.fileContent }}</h5>-->
                                                <!--                                                                    <p class="text-muted font-size-13 mb-0">{{ data.fileSize }}</p>-->
                                                <!--                                                                </div>-->
                                                <!--                                                            </div>-->

                                                <!--                                                            <div class="ms-4">-->
                                                <!--                                                                <ul class="list-inline mb-0 font-size-20">-->
                                                <!--                                                                    <li class="list-inline-item">-->
                                                <!--                                                                        <a href="javascript:void(0);"-->
                                                <!--                                                                           class="text-muted">-->
                                                <!--                                                                            <i class="ri-download-2-line"></i>-->
                                                <!--                                                                        </a>-->
                                                <!--                                                                    </li>-->
                                                <!--                                                                    <li class="list-inline-item dropdown"-->
                                                <!--                                                                        ngbDropdown>-->
                                                <!--                                                                        <a class="dropdown-toggle text-muted"-->
                                                <!--                                                                           href="javascript:void(0);"-->
                                                <!--                                                                           ngbDropdownToggle role="button"-->
                                                <!--                                                                           data-toggle="dropdown"-->
                                                <!--                                                                           aria-haspopup="true"-->
                                                <!--                                                                           aria-expanded="false">-->
                                                <!--                                                                            <i class="ri-more-fill"></i>-->
                                                <!--                                                                        </a>-->
                                                <!--                                                                        <div-->
                                                <!--                                                                                class="dropdown-menu dropdown-menu-right"-->
                                                <!--                                                                                ngbDropdownMenu>-->
                                                <!--                                                                            <a class="dropdown-item"-->
                                                <!--                                                                               href="javascript:void(0);">{{ 'chat.messages.filedropdown.share' | translate }}-->
                                                <!--                                                                                <i class="ri-share-line float-end text-muted"></i></a>-->
                                                <!--                                                                            <a class="dropdown-item"-->
                                                <!--                                                                               href="javascript:void(0);"-->
                                                <!--                                                                               (click)="deleteMessage($event)">{{-->
                                                <!--                                                                                    'chat.messages.filedropdown.delete' |-->
                                                <!--                                                                                        translate-->
                                                <!--                                                                                }}-->
                                                <!--                                                                                <i class="ri-delete-bin-line float-end text-muted"></i></a>-->
                                                <!--                                                                        </div>-->
                                                <!--                                                                    </li>-->
                                                <!--                                                                </ul>-->
                                                <!--                                                            </div>-->
                                                <!--                                                        </div>-->
                                                <!--                                                    </div>-->
                                                <!--                                                }-->
                                                <!--                                                @if (!data.istyping) {-->
                                                <!--                                                    <p class="chat-time mb-0">-->
                                                <!--                                                        <i class="ri-time-line align-middle"></i>-->
                                                <!--                                                        <span-->
                                                <!--                                                                class="align-middle">{{ data.time | translate }}</span>-->
                                                <!--                                                    </p>-->
                                                <!--                                                }-->
                                            </div>

                                            <div class="dropdown align-self-start" ngbDropdown>
                                                <a class="dropdown-toggle" href="javascript:void(0);" role="button"
                                                   ngbDropdownToggle data-toggle="dropdown" aria-haspopup="true"
                                                   aria-expanded="false">
                                                    <i class="ri-more-2-fill"></i>
                                                </a>
                                                <div class="dropdown-menu" ngbDropdownMenu>
                                                    <a class="dropdown-item" href="javascript:void(0);"
                                                       (click)="replyMessage($event)">{{ 'chat.messages.dropdown.reply' | translate }}
                                                        <i class="ri-reply-line float-end text-muted"></i></a>
                                                    <a class="dropdown-item" href="javascript:void(0);"
                                                       (click)="copyMessage($event)">{{ 'chat.messages.dropdown.copy' | translate }}
                                                        <i class="ri-file-copy-line float-end text-muted"></i></a>
                                                    <a class="dropdown-item" href="javascript:void(0);">{{
                                                            'chat.messages.dropdown.save' |
                                                                translate
                                                        }} <i class="ri-save-line float-end text-muted"></i></a>
                                                    <!--                                                    <a class="dropdown-item" href="javascript:void(0);"-->
                                                    <!--                                                       (click)="centerModal(centerDataModal)">{{ 'chat.messages.dropdown.forward' | translate }}-->
                                                    <!--                                                        <i class="ri-chat-forward-line float-end text-muted"></i></a>-->
                                                    <a class="dropdown-item" href="javascript:void(0);"
                                                       (click)="deleteMessage($event)">{{ 'chat.messages.dropdown.delete' | translate }}
                                                        <i class="ri-delete-bin-line float-end text-muted"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                        <!--                                        @if (data.message2) {-->
                                        <!--                                            <div class="ctext-wrap">-->
                                        <!--                                                <div class="ctext-wrap-content">-->
                                        <!--                                                    <p class="mb-0">-->
                                        <!--                                                        {{ data.message2 | translate }}-->
                                        <!--                                                    </p>-->
                                        <!--                                                    <p class="chat-time mb-0"><i-->
                                        <!--                                                            class="ri-time-line align-middle"></i> <span-->
                                        <!--                                                            class="align-middle">{{ data.time | translate }}</span></p>-->
                                        <!--                                                </div>-->
                                        <!--                                                <div class="dropdown align-self-start" ngbDropdown>-->
                                        <!--                                                    <a class="dropdown-toggle" href="javascript:void(0);"-->
                                        <!--                                                       role="button" ngbDropdownToggle data-toggle="dropdown"-->
                                        <!--                                                       aria-haspopup="true" aria-expanded="false">-->
                                        <!--                                                        <i class="ri-more-2-fill"></i>-->
                                        <!--                                                    </a>-->
                                        <!--                                                    <div class="dropdown-menu" ngbDropdownMenu>-->
                                        <!--                                                        <a class="dropdown-item" href="javascript:void(0);"-->
                                        <!--                                                           (click)="replyMessage($event)">{{ 'chat.messages.dropdown.reply' | translate }}-->
                                        <!--                                                            <i class="ri-reply-line float-end text-muted"></i></a>-->
                                        <!--                                                        <a class="dropdown-item" href="javascript:void(0);"-->
                                        <!--                                                           (click)="copyMessage($event)">{{ 'chat.messages.dropdown.copy' | translate }}-->
                                        <!--                                                            <i class="ri-file-copy-line float-end text-muted"></i></a>-->
                                        <!--                                                        <a class="dropdown-item" href="javascript:void(0);">{{-->
                                        <!--                                                                'chat.messages.dropdown.save' |-->
                                        <!--                                                                    translate-->
                                        <!--                                                            }} <i class="ri-save-line float-end text-muted"></i></a>-->
                                        <!--                                                        &lt;!&ndash;                                                        <a class="dropdown-item" href="javascript:void(0);"&ndash;&gt;-->
                                        <!--                                                        &lt;!&ndash;                                                           (click)="centerModal(centerDataModal)">{{ 'chat.messages.dropdown.forward' | translate }}&ndash;&gt;-->
                                        <!--                                                        &lt;!&ndash;                                                            <i class="ri-chat-forward-line float-end text-muted"></i></a>&ndash;&gt;-->
                                        <!--                                                        <a class="dropdown-item" href="javascript:void(0);"-->
                                        <!--                                                           (click)="deleteMessage($event)">{{ 'chat.messages.dropdown.delete' | translate }}-->
                                        <!--                                                            <i class="ri-delete-bin-line float-end text-muted"></i></a>-->
                                        <!--                                                    </div>-->
                                        <!--                                                </div>-->
                                        <!--                                            </div>-->
                                        <!--                                        }-->

                                        <div class="conversation-name">
                                            <span>{{ msg.fromUser }}</span>
                                        </div>

                                    </div>
                                </div>
                            }

                        </li>
                    }
                </ul>
            </ngx-simplebar>
            <div class="alert alert-warning alert-dismissible copyclipboard-alert px-4 fade" id="copyClipBoard"
                 role="alert">
                Message copied
            </div>
            <!-- </div> -->
            <!-- end chat conversation end -->

            <!-- start chat input section -->
            <div class="chat-input-section p-3 p-lg-4 border-top mb-0 send-msg">
                <form (ngSubmit)="messageSave()" [formGroup]="formData" id="chatinput-form"
                      enctype="multipart/form-data">

                    <div class="row g-0" *ngIf="!chatStore.memberOfCurrentChat()">
                        <div class="col-auto">
                            <div class="chat-input-links ms-md-2 me-md-0">
                                <ul class="list-inline mb-0">
                                    <li class="list-inline-item">
                                        <button (click)="joinCurrentChat()"
                                                class="btn btn-primary font-size-16 btn-lg chat-send waves-effect waves-light">
                                            JOIN &nbsp;
                                            <i class="ri-chat-3-fill"></i>
                                        </button>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>

                    <div class="row g-0" *ngIf="chatStore.memberOfCurrentChat()">
                        <div class="col">
                            <div>
                                <input type="text" class="form-control form-control-lg bg-light border-light"
                                       placeholder="Enter Message..." formControlName="message" [(ngModel)]="emoji"
                                       (blur)="onBlur()" (focus)="onFocus()">
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="chat-input-links ms-md-2 me-md-0">
                                <ul class="list-inline mb-0">
<!--                                    <li class="list-inline-item">-->
<!--                                        <button type="button"-->
<!--                                                class="btn btn-link text-decoration-none font-size-16 btn-lg waves-effect"-->
<!--                                                data-toggle="tooltip" data-placement="top" ngbTooltip="Emoji"-->
<!--                                                (click)="toggleEmojiPicker()" id="emoji-btn">-->
<!--                                            <i class="ri-emotion-happy-line"></i>-->
<!--                                        </button>-->
<!--                                        @if (showEmojiPicker) {-->
<!--                                            <emoji-mart class="emoji-mart" (emojiSelect)="addEmoji($event)"-->
<!--                                                        title="Pick your emojiâ€¦"></emoji-mart>-->
<!--                                        }-->
<!--                                    </li>-->
                                    <li class="list-inline-item">
                                        <label id="files"
                                               class="btn btn-link text-decoration-none font-size-16 btn-lg waves-effect">
                                            <i class="ri-image-2-line"></i>
                                            <input name="fileInput" size="60" type="file" accept=".jpg,.jpeg,.png"
                                                   class="form-control-file d-none" (change)="fileChange($event)">
                                        </label>
                                    </li>
                                    <li class="list-inline-item">
                                        <button type="submit"
                                                class="btn btn-primary font-size-16 btn-lg chat-send waves-effect waves-light">
                                            <i class="ri-send-plane-2-fill"></i>
                                        </button>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </form>
            </div>
            <!-- end chat input section -->

            <div _ngcontent-hes-c189="" class="replyCard">
                <div _ngcontent-hes-c189="" class="card mb-0">
                    <div _ngcontent-hes-c189="" class="card-body py-3">
                        <div _ngcontent-hes-c189="" class="replymessage-block mb-0 d-flex align-items-start">
                            <div _ngcontent-hes-c189="" class="flex-grow-1">
                                <h5 _ngcontent-hes-c189="" class="conversation-name">You</h5>
                                <p _ngcontent-hes-c189="" class="mb-0">Wow that's great</p>
                            </div>
                            <div _ngcontent-hes-c189="" class="flex-shrink-0">
                                <button _ngcontent-hes-c189="" type="button" id="close_toggle"
                                        class="btn btn-sm btn-link mt-n2 me-n3 fs-18 shadow-none"
                                        (click)="closeReplay()">
                                    <i _ngcontent-xeu-c127="" class="ri-close-line float-end fs-5"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- end chat conversation section -->

        <!-- Chat Info Sidebar -->
        <div class="user-profile-sidebar">
            <div class="px-3 px-lg-4 pt-3 pt-lg-4">
                <div class="user-chat-nav text-end">
                    <button type="button" class="btn nav-btn" id="user-profile-hide" (click)="CloseChatInfo()">
                        <i class="ri-close-line"></i>
                    </button>
                </div>
            </div>
            <div class="text-center p-4 border-bottom">
                <div class="mb-4 d-flex justify-content-center">
                    @if (userProfile) {
                        <img src="{{userProfile}}" class="rounded-circle avatar-lg img-thumbnail" alt="">
                    } @else {
                        <div class="avatar-lg">
              <span class="avatar-title rounded-circle bg-primary-subtle text-primary font-size-24">
                {{ (userName | translate).charAt(0) }}
              </span>
                        </div>
                    }
                </div>
                <h5 class="font-size-16 mb-1 text-truncate">{{ userName | translate }}</h5>
                <p class="text-muted text-truncate mb-1"><i class="ri-record-circle-fill font-size-10 me-1 ms-0"
                                                            [ngClass]=" {'text-success': userStatus === 'online','text-warning': userStatus === 'away'}"></i>
                    {{ userStatus | translate }}</p>
            </div>
            <!-- End profile user -->

            <!-- Start user-profile-desc -->
            <ngx-simplebar class="p-4 user-profile-desc">
                <div class="text-muted">
                    <p class="mb-4"> {{ 'chat.rightpanel.message' | translate }}</p>
                </div>

                <div id="profile-user-accordion" class="custom-accordion">
                    <div ngbAccordion #acc="ngbAccordion" activeIds="about" [closeOthers]="true">
                        <div ngbAccordionItem cardClass="card shadow-none border mb-2" id="about">
                            <div ngbAccordionHeader>
                                <h5 class="font-size-14 m-0">
                                    <i class="ri-user-2-line me-2 align-middle d-inline-block"></i>
                                    {{ 'chat.rightpanel.about.text' | translate }}
                                </h5>
                            </div>
                            <div ngbAccordionCollapse>
                                <div>
                                    <p class="text-muted mb-1">{{ 'chat.rightpanel.about.name.text' | translate }}</p>
                                    <h5 class="font-size-14">{{ userName | translate }}</h5>
                                </div>

                                <div class="mt-4">
                                    <p class="text-muted mb-1">{{ 'chat.rightpanel.about.email.text' | translate }}</p>
                                    <h5 class="font-size-14">{{ 'chat.rightpanel.about.email.value' | translate }}</h5>
                                </div>

                                <div class="mt-4">
                                    <p class="text-muted mb-1">{{ 'chat.rightpanel.about.time.text' | translate }}</p>
                                    <h5 class="font-size-14">{{ 'chat.rightpanel.about.time.value' | translate }}</h5>
                                </div>

                                <div class="mt-4">
                                    <p class="text-muted mb-1">{{ 'chat.rightpanel.about.location.text' | translate }}</p>
                                    <h5 class="font-size-14 mb-0">{{ 'chat.rightpanel.about.location.value' | translate }}</h5>
                                </div>
                            </div>
                        </div>
                        <div ngbAccordionItem cardClass="card shadow-none border mb-2" id="file">
                            <div ngbAccordionHeader>
                                <h5 class="font-size-14 m-0">
                                    <i class="ri-attachment-line me-2 align-middle d-inline-block"></i>{{
                                        'chat.rightpanel.attachedfile.text'
                                            | translate
                                    }}
                                </h5>
                            </div>
                            <div ngbAccordionCollapse>
                                <div class="card p-2 border mb-2">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm me-3 ms-0">
                                            <div
                                                    class="avatar-title bg-primary-subtle text-primary rounded font-size-20">
                                                <i class="ri-file-text-fill"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <div class="text-start">
                                                <h5 class="font-size-14 mb-1">{{ 'chat.rightpanel.attachedfile.file1.name' | translate }}</h5>
                                                <p class="text-muted font-size-13 mb-0">{{ 'chat.rightpanel.attachedfile.file1.size' | translate }}
                                                </p>
                                            </div>
                                        </div>

                                        <div class="ms-4 me-0">
                                            <ul class="list-inline mb-0 font-size-18">
                                                <li class="list-inline-item">
                                                    <a href="javascript: void(0);" class="text-muted px-1">
                                                        <i class="ri-download-2-line"></i>
                                                    </a>
                                                </li>
                                                <li class="list-inline-item dropdown" ngbDropdown>
                                                    <a class="dropdown-toggle text-muted px-1" ngbDropdownToggle
                                                       href="javascript:void(0);" role="button"
                                                       data-toggle="dropdown" aria-haspopup="true"
                                                       aria-expanded="false">
                                                        <i class="ri-more-fill"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-right" ngbDropdownMenu>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.action' |
                                                                    translate
                                                            }}</a>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.another' |
                                                                    translate
                                                            }}</a>
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.delete' |
                                                                    translate
                                                            }}</a>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- end card -->

                                <div class="card p-2 border mb-2">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm me-3 ms-0">
                                            <div
                                                    class="avatar-title bg-primary-subtle text-primary rounded font-size-20">
                                                <i class="ri-image-fill"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <div class="text-start">
                                                <h5 class="font-size-14 mb-1">{{ 'chat.rightpanel.attachedfile.file2.name' | translate }}</h5>
                                                <p class="text-muted font-size-13 mb-0">{{ 'chat.rightpanel.attachedfile.file2.name' | translate }}
                                                </p>
                                            </div>
                                        </div>

                                        <div class="ms-4 me-0">
                                            <ul class="list-inline mb-0 font-size-18">
                                                <li class="list-inline-item">
                                                    <a href="javascript: void(0);" class="text-muted px-1">
                                                        <i class="ri-download-2-line"></i>
                                                    </a>
                                                </li>
                                                <li class="list-inline-item dropdown" ngbDropdown>
                                                    <a class="dropdown-toggle text-muted px-1" ngbDropdownToggle
                                                       href="javascript: void(0);" role="button"
                                                       data-toggle="dropdown" aria-haspopup="true"
                                                       aria-expanded="false">
                                                        <i class="ri-more-fill"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-right" ngbDropdownMenu>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.action' |
                                                                    translate
                                                            }}</a>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.another' |
                                                                    translate
                                                            }}</a>
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.delete' |
                                                                    translate
                                                            }}</a>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- end card -->

                                <div class="card p-2 border mb-2">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm me-3 ms-0">
                                            <div
                                                    class="avatar-title bg-primary-subtle text-primary rounded font-size-20">
                                                <i class="ri-image-fill"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <div class="text-start">
                                                <h5 class="font-size-14 mb-1">{{ 'chat.rightpanel.attachedfile.file3.name' | translate }}</h5>
                                                <p class="text-muted font-size-13 mb-0">{{ 'chat.rightpanel.attachedfile.file3.size' | translate }}
                                                </p>
                                            </div>
                                        </div>

                                        <div class="ms-4 me-0">
                                            <ul class="list-inline mb-0 font-size-18">
                                                <li class="list-inline-item">
                                                    <a href="javascript:void(0);" class="text-muted px-1">
                                                        <i class="ri-download-2-line"></i>
                                                    </a>
                                                </li>
                                                <li class="list-inline-item dropdown" ngbDropdown>
                                                    <a class="dropdown-toggle text-muted px-1" ngbDropdownToggle
                                                       href="javascript: void(0);" role="button"
                                                       data-toggle="dropdown" aria-haspopup="true"
                                                       aria-expanded="false">
                                                        <i class="ri-more-fill"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-right" ngbDropdownMenu>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.action' |
                                                                    translate
                                                            }}</a>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.another' |
                                                                    translate
                                                            }}</a>
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.delete' |
                                                                    translate
                                                            }}</a>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- end card -->

                                <div class="card p-2 border mb-2">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm me-3 ms-0">
                                            <div
                                                    class="avatar-title bg-primary-subtle text-primary rounded font-size-20">
                                                <i class="ri-file-text-fill"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <div class="text-start">
                                                <h5 class="font-size-14 mb-1">{{ 'chat.rightpanel.attachedfile.file4.name' | translate }}</h5>
                                                <p class="text-muted font-size-13 mb-0">{{ 'chat.rightpanel.attachedfile.file4.size' | translate }}
                                                </p>
                                            </div>
                                        </div>

                                        <div class="ms-4 me-0">
                                            <ul class="list-inline mb-0 font-size-18">
                                                <li class="list-inline-item">
                                                    <a href="javascript:void(0);" class="text-muted px-1">
                                                        <i class="ri-download-2-line"></i>
                                                    </a>
                                                </li>
                                                <li class="list-inline-item dropdown" ngbDropdown>
                                                    <a class="dropdown-toggle text-muted px-1" ngbDropdownToggle
                                                       href="javascript:void(0);" role="button"
                                                       data-toggle="dropdown" aria-haspopup="true"
                                                       aria-expanded="false">
                                                        <i class="ri-more-fill"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-right" ngbDropdownMenu>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.action' |
                                                                    translate
                                                            }}</a>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.another' |
                                                                    translate
                                                            }}</a>
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="javascript:void(0);">{{
                                                                'chat.rightpanel.attachedfile.dropdown.delete' |
                                                                    translate
                                                            }}</a>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- end card -->
                            </div>
                        </div>
                    </div>
                    <!-- End Attached Files card -->
                </div>
                <!-- end profile-user-accordion -->
            </ngx-simplebar>
            <!-- end user-profile-desc -->

        </div><!--end offcanvas-body-->
    </div>
</div>
